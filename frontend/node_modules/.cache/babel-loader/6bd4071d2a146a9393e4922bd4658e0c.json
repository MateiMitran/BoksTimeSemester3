{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\matei\\\\Desktop\\\\FinalBoksTime\\\\sem3_individualtrackproject_4207734\\\\frontend\\\\src\\\\components\\\\profile.component.js\";\nimport React, { Component } from \"react\";\nimport userService from \"../services/user.service\";\nimport './profile.component.css';\nimport { isEmail } from \"validator\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst required = value => {\n  if (!value) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"This field is required!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nconst email = value => {\n  if (!isEmail(value)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"This is not a valid email.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nconst vname = value => {\n  if (value.length < 3 || value.length > 20) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"The name must be between 3 and 20 characters.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.onChangeFirstName = this.onChangeFirstName.bind(this);\n    this.onChangeLastName = this.onChangeLastName.bind(this);\n    this.onChangeAge = this.onChangeAge.bind(this);\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangeNewPassword = this.onChangeNewPassword.bind(this);\n    this.onChangeCurrentPassword = this.onChangeCurrentPassword.bind(this);\n    this.state = {\n      id: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      age: \"\",\n      username: \"\",\n      email: \"\",\n      currentPassword: \"\",\n      newPassword: \"\",\n      message: \"\",\n      successful: false\n    };\n  }\n\n  onChangeFirstName(e) {\n    this.setState({\n      firstName: e.target.value\n    });\n  }\n\n  onChangeLastName(e) {\n    this.setState({\n      lastName: e.target.value\n    });\n  }\n\n  onChangeEmail(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  onChangeAge(e) {\n    this.setState({\n      age: e.target.value\n    });\n  }\n\n  onChangeNewPassword(e) {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  onChangeCurrentPassword(e) {\n    this.setState({\n      currentPassword: e.target.value\n    });\n  }\n\n  handleUpdate(e) {\n    e.preventDefault();\n    this.setState({\n      message: \"\",\n      successful: false\n    });\n    console.log(this.state.firstName);\n    console.log(this.state.lastName);\n    console.log(this.state.email);\n    console.log(this.state.age);\n    console.log(this.state.newPassword);\n    console.log(this.state.currentPassword);\n    this.form.validateAll();\n    userService.updateUser(this.state.firstName, this.state.lastName, this.state.email, this.state.age, this.state.newPassword).then(response => {\n      this.setState({\n        message: \"Worked\",\n        successful: true\n      });\n    }, error => {\n      const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      this.setState({\n        successful: false,\n        message: resMessage\n      });\n    });\n  }\n\n  componentDidMount() {\n    userService.getUser().then(value => localStorage.setItem(\"userRole\", value.data.roleName));\n    userService.getUser().then(response => {\n      this.setState({\n        id: response.data.id,\n        firstName: response.data.firstName,\n        lastName: response.data.lastName,\n        age: response.data.age,\n        password: response.data.password,\n        username: response.data.username,\n        email: response.data.email\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Form, {\n      className: \"simple-form\",\n      onSubmit: this.handleUpdate,\n      ref: c => {\n        this.form = c;\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Account Preferences\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group full clearfix\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group-half\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"first-name\",\n            children: \"First Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            className: \"form-control\",\n            name: \"firstName\",\n            value: this.state.firstName || \"\",\n            onChange: this.onChangeFirstName,\n            validations: [required, vname],\n            placeholder: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group-half\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"last-name\",\n            children: \"Last Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            className: \"form-control\",\n            name: \"lastName\",\n            value: this.state.lastName || \"\",\n            onChange: this.onChangeLastName,\n            validations: [required, vname],\n            placeholder: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"email\",\n          value: this.state.email || \"\",\n          onChange: this.onChangeEmail,\n          validations: [required, email],\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"age\",\n          children: \"Age:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"age\",\n          value: this.state.age || \"\",\n          onChange: this.onChangeAge,\n          validations: [required],\n          placeholder: \"Age\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"current-password\",\n          children: \"Current Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          className: \"form-control\",\n          name: \"currentPassword\",\n          onChange: this.onChangeCurrentPassword,\n          validations: [required],\n          placeholder: \"Current Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"new-password\",\n          children: \"New Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          className: \"form-control\",\n          name: \"newPassword\",\n          onChange: this.onChangeNewPassword,\n          validations: [required],\n          placeholder: \"New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-block\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), this.state.message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-success\",\n          role: \"alert\",\n          children: this.state.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(CheckButton, {\n        style: {\n          display: \"none\"\n        },\n        ref: c => {\n          this.checkBtn = c;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/matei/Desktop/FinalBoksTime/sem3_individualtrackproject_4207734/frontend/src/components/profile.component.js"],"names":["React","Component","userService","isEmail","Form","Input","CheckButton","required","value","email","vname","length","Profile","constructor","props","handleUpdate","bind","onChangeFirstName","onChangeLastName","onChangeAge","onChangeEmail","onChangeNewPassword","onChangeCurrentPassword","state","id","firstName","lastName","age","username","currentPassword","newPassword","message","successful","e","setState","target","preventDefault","console","log","form","validateAll","updateUser","then","response","error","resMessage","data","toString","componentDidMount","getUser","localStorage","setItem","roleName","password","render","c","display","checkBtn"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport userService from \"../services/user.service\";\r\nimport './profile.component.css';\r\nimport { isEmail } from \"validator\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vname = value => {\r\n  if (value.length < 3 || value.length > 20) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The name must be between 3 and 20 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleUpdate = this.handleUpdate.bind(this);\r\n    this.onChangeFirstName = this.onChangeFirstName.bind(this);\r\n    this.onChangeLastName = this.onChangeLastName.bind(this);\r\n    this.onChangeAge = this.onChangeAge.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.onChangeNewPassword = this.onChangeNewPassword.bind(this);\r\n    this.onChangeCurrentPassword = this.onChangeCurrentPassword.bind(this);\r\n   \r\n    this.state = {\r\n      id: \"\",\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      age: \"\",\r\n      username: \"\",\r\n      email: \"\",\r\n      currentPassword: \"\",\r\n      newPassword: \"\",\r\n      message: \"\",\r\n      successful: false\r\n    };\r\n\r\n  }\r\n  onChangeFirstName(e) {\r\n    this.setState({\r\n      firstName: e.target.value\r\n    });\r\n  }\r\n  \r\n  onChangeLastName(e) {\r\n    this.setState({\r\n      lastName: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeAge(e) {\r\n    this.setState({\r\n      age: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeNewPassword(e) {\r\n    this.setState({\r\n      newPassword: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeCurrentPassword(e) {\r\n    this.setState({\r\n      currentPassword: e.target.value\r\n    });\r\n  }\r\n\r\n  handleUpdate(e) {\r\n    e.preventDefault();\r\n    this.setState({\r\n      message: \"\",\r\n      successful: false\r\n    });\r\n    console.log(this.state.firstName);\r\n    console.log(this.state.lastName);\r\n    console.log(this.state.email);\r\n    console.log(this.state.age);\r\n    console.log(this.state.newPassword);\r\n    console.log(this.state.currentPassword);\r\n    this.form.validateAll();\r\n    userService.updateUser(\r\n      this.state.firstName,\r\n      this.state.lastName,\r\n      this.state.email,\r\n      this.state.age,\r\n      this.state.newPassword\r\n    ).then(response => {\r\n      this.setState({\r\n        message: \"Worked\",\r\n        successful: true\r\n      });\r\n    },\r\n    error => {\r\n      const resMessage =\r\n      (error.response && error.response.data && error.response.data.message)\r\n      || error.message || error.toString();\r\n\r\n      this.setState({\r\n        successful: false,\r\n        message: resMessage\r\n      });\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    userService.getUser().then(value => localStorage.setItem(\"userRole\",value.data.roleName));\r\n    userService.getUser().then(response => {\r\n    this.setState({id: response.data.id, \r\n    firstName: response.data.firstName,\r\n    lastName: response.data.lastName, \r\n    age: response.data.age,\r\n    password: response.data.password,\r\n    username: response.data.username, \r\n    email: response.data.email})\r\n    });\r\n  }\r\n\r\nrender() {\r\n  return (    \r\n    <Form className = \"simple-form\"\r\n      onSubmit={this.handleUpdate}\r\n      ref={c => {\r\n      this.form = c;\r\n    }}\r\n     >\r\n    <h2>Account Preferences</h2>\r\n      <div className=\"form-group full clearfix\">\r\n      <div className=\"form-group-half\">\r\n          <label htmlFor=\"first-name\">First Name:</label>\r\n            <Input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"firstName\"\r\n              value= {this.state.firstName || \"\"}\r\n              onChange={this.onChangeFirstName}\r\n              validations={[required, vname]}\r\n              placeholder=\"First Name\"\r\n            />\r\n         </div>\r\n        <div className=\"form-group-half\">\r\n         <label htmlFor=\"last-name\">Last Name:</label>\r\n            <Input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"lastName\"\r\n              value= {this.state.lastName || \"\"}\r\n              onChange={this.onChangeLastName}\r\n              validations={[required, vname]}\r\n              placeholder=\"Last Name\"\r\n            />\r\n        </div>\r\n      </div>\r\n      <div className=\"form-group full\">\r\n        <label htmlFor=\"email\">Email:</label>\r\n            <Input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"email\"\r\n              value= {this.state.email || \"\"}\r\n              onChange={this.onChangeEmail}\r\n              validations={[required, email]}\r\n              disabled\r\n            />\r\n        </div>\r\n        <div className=\"form-group full\">\r\n          <label htmlFor=\"age\">Age:</label>\r\n            <Input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"age\"\r\n              value= {this.state.age || \"\"}\r\n              onChange={this.onChangeAge}\r\n              validations={[required]}\r\n              placeholder=\"Age\"\r\n            />\r\n        </div>\r\n        <div className=\"form-group full\">\r\n          <label htmlFor=\"current-password\">Current Password:</label>\r\n            <Input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              name=\"currentPassword\"\r\n              onChange={this.onChangeCurrentPassword }\r\n              validations={[required]}\r\n              placeholder=\"Current Password\"\r\n            />\r\n        </div>\r\n        <div className=\"form-group full\">\r\n          <label htmlFor=\"new-password\">New Password:</label>\r\n            <Input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              name=\"newPassword\"\r\n              onChange={this.onChangeNewPassword}\r\n              validations={[required]}\r\n              placeholder=\"New Password\"\r\n            />\r\n        </div>\r\n        <div className=\"form-group\">\r\n              <button className=\"btn btn-primary btn-block\">\r\n                <span>Save</span>\r\n              </button>\r\n        </div>\r\n        {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div className=\"alert alert-success\" role=\"alert\">\r\n                  { this.state.message }\r\n                </div>\r\n              </div>\r\n            )}\r\n        <CheckButton\r\n          style= {{display: \"none\"}}\r\n          ref={c => {\r\n          this.checkBtn = c;\r\n           }}\r\n        />\r\n        </Form>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}